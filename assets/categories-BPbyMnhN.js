import{_ as j}from"./YunCard.vue_vue_type_script_setup_true_lang-DrznGDEn.js";import{_ as x}from"./YunPostCollapse.vue_vue_type_style_index_0_lang-j-HnLoE0.js";import{d as A,b as E,u as q,l as $,m as P,z as L,s as K,i as R,e as i,o as t,F as _,g as y,x as S,v as b,f as l,t as V,c as f,aA as N,w as p,j as m,C as T,Q as U,aB as D,ar as F,aw as W,ax as H,r as M,av as O,ay as Q}from"./app-D6Hejker.js";import{u as G}from"./helper-CPCbGAU1.js";import{_ as J}from"./YunPageHeader.vue_vue_type_script_setup_true_lang-Dma2ZTu7.js";const X={class:"category-list-item inline-flex items-center cursor-pointer"},Z={key:0,"i-ri-folder-add-line":""},I={key:1,style:{color:"var(--va-c-primary)"},"i-ri-folder-reduce-line":""},ee={key:0},te={m:"l-1",font:"serif black"},oe=A({__name:"YunCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(Y){const u=Y,g=E(),n=q(),v=$(()=>{const e=n.query.category||"";return Array.isArray(e)?[e]:e.split("/")}),o=P(u.collapsable),{t:c}=L(),{locale:C}=L();function z(e){const s=C.value==="zh-CN"?"zh":C.value;return e[`title_${s}`]?e[`title_${s}`]:e.title}const d=P(),{show:r}=G(d);function k(e){g.push({query:{category:e}}),r()}return K(()=>{const e=document.querySelector(".post-collapse-container");e&&(d.value=e)}),(e,s)=>{const h=R("YunCategory",!0),w=R("RouterLink");return t(),i(_,null,[y("li",X,[y("span",{class:"folder-action inline-flex",onClick:s[0]||(s[0]=a=>o.value=!o.value)},[o.value?(t(),i("div",Z)):(t(),i("div",I))]),y("span",{class:"category-name",m:"l-1",onClick:s[1]||(s[1]=a=>k(e.parentKey))},b(e.category.name==="Uncategorized"?l(c)("category.uncategorized"):e.category.name)+" ["+b(e.category.total)+"] ",1)]),o.value?S("v-if",!0):(t(),i("ul",ee,[(t(!0),i(_,null,V(e.category.children.values(),(a,B)=>(t(),i("li",{key:B,class:"post-list-item",m:"l-4"},[l(N)(a)?(t(),f(h,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${a.name}`:a.name,category:a,collapsable:!v.value.includes(a.name)},null,8,["parent-key","category","collapsable"])):(t(),i(_,{key:1},[a.title?(t(),f(w,{key:0,to:a.path||"",class:"inline-flex items-center"},{default:p(()=>[s[2]||(s[2]=y("div",{"i-ri-file-text-line":""},null,-1)),y("span",te,b(z(a)),1)]),_:2},1032,["to"])):S("v-if",!0)],64))]))),128))]))],64)}}}),ne=A({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(Y){const u=q(),g=$(()=>{const n=u.query.category||"";return Array.isArray(n)?[n]:n.split("/")});return(n,v)=>{const o=oe;return t(!0),i(_,null,V(n.categories.values(),c=>(t(),i("ul",{key:c.name,class:"category-list",m:"l-4"},[m(o,{"parent-key":c.name,category:c,level:n.level+1,collapsable:!g.value.includes(c.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),ae={text:"center",class:"yun-text-light",p:"2"},ue=A({__name:"categories",setup(Y){const{t:u}=L(),g=T(),n=U(),v=q(),o=$(()=>v.query.category||""),c=D(),C=$(()=>g.postList.filter(r=>r.categories&&o.value!=="Uncategorized"?typeof r.categories=="string"?r.categories===o.value:r.categories.join("/").startsWith(o.value)&&r.categories[0]===o.value.split("/")[0]:!r.categories&&o.value==="Uncategorized"?r.categories===void 0:!1)),z=F(n);return W([H({"@type":"CollectionPage"})]),(d,r)=>{const k=O,e=J,s=ne,h=R("RouterView"),w=x,a=j;return t(),i(_,null,[d.$slots["sidebar-child"]?(t(),f(k,{key:0},{default:p(()=>[M(d.$slots,"sidebar-child")]),_:3})):(t(),f(k,{key:1})),m(h,null,{default:p(({Component:B})=>[(t(),f(Q(B),null,{"main-header":p(()=>[m(e,{title:l(z)||l(u)("menu.categories"),icon:l(n).icon||"i-ri-folder-2-line",color:l(n).color,"page-title-class":l(n).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":p(()=>[y("div",ae,b(l(u)("counter.categories",Array.from(l(c).children).length)),1),m(s,{categories:l(c).children},null,8,["categories"]),m(h)]),"main-nav-before":p(()=>[o.value?(t(),f(a,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:p(()=>[m(e,{title:o.value==="Uncategorized"?l(u)("category.uncategorized"):o.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),m(w,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:C.value},null,8,["posts"])]),_:1})):S("v-if",!0)]),_:1}))]),_:1})],64)}}});export{ue as default};
