import{_ as V}from"./YunCard.vue_vue_type_script_setup_true_lang-Bt2wnHI3.js";import{_ as j}from"./YunPostCollapse.vue_vue_type_style_index_0_lang-CgEvlhff.js";import{d as S,b as E,u as A,l as x,m as q,z as B,s as K,i as L,e as c,o as t,F as v,g as f,x as R,v as $,f as r,t as P,c as g,aA as N,w as p,j as d,C as T,Q as U,aB as D,ar as F,aw as W,ax as H,r as M,av as O,ay as Q}from"./app-CiB7UBw_.js";import{u as G}from"./helper-B-T7R4nf.js";import{_ as J}from"./YunPageHeader.vue_vue_type_script_setup_true_lang-CE6MNawq.js";const X={class:"category-list-item inline-flex items-center cursor-pointer"},Z={key:0,"i-ri-folder-add-line":""},I={key:1,style:{color:"var(--va-c-primary)"},"i-ri-folder-reduce-line":""},ee={key:0},te={m:"l-1",font:"serif black"},ne=S({__name:"YunCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(a){const m=a,_=E(),s=A(),C=x(()=>{const e=s.query.category||"";return Array.isArray(e)?[e]:e.split("/")}),n=q(m.collapsable),{t:u}=B(),{locale:k}=B();function Y(e){const l=k.value==="zh-CN"?"zh":k.value;return e[`title_${l}`]?e[`title_${l}`]:e.title}const y=q(),{show:i}=G(y);function h(e){_.push({query:{category:e}}),i()}return K(()=>{const e=document.querySelector(".post-collapse-container");e&&(y.value=e)}),(e,l)=>{const b=L("YunCategory",!0),z=L("RouterLink");return t(),c(v,null,[f("li",X,[f("span",{class:"folder-action inline-flex",onClick:l[0]||(l[0]=o=>n.value=!n.value)},[n.value?(t(),c("div",Z)):(t(),c("div",I))]),f("span",{class:"category-name",m:"l-1",onClick:l[1]||(l[1]=o=>h(a.parentKey))},$(a.category.name==="Uncategorized"?r(u)("category.uncategorized"):a.category.name)+" ["+$(a.category.total)+"] ",1)]),n.value?R("v-if",!0):(t(),c("ul",ee,[(t(!0),c(v,null,P(a.category.children.values(),(o,w)=>(t(),c("li",{key:w,class:"post-list-item",m:"l-4"},[r(N)(o)?(t(),g(b,{key:0,"parent-key":a.parentKey?`${a.parentKey}/${o.name}`:o.name,category:o,collapsable:!C.value.includes(o.name)},null,8,["parent-key","category","collapsable"])):(t(),c(v,{key:1},[o.title?(t(),g(z,{key:0,to:o.path||"",class:"inline-flex items-center"},{default:p(()=>[l[2]||(l[2]=f("div",{"i-ri-file-text-line":""},null,-1)),f("span",te,$(Y(o)),1)]),_:2},1032,["to"])):R("v-if",!0)],64))]))),128))]))],64)}}}),ae=S({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(a){const m=A(),_=x(()=>{const s=m.query.category||"";return Array.isArray(s)?[s]:s.split("/")});return(s,C)=>{const n=ne;return t(!0),c(v,null,P(a.categories.values(),u=>(t(),c("ul",{key:u.name,class:"category-list",m:"l-4"},[d(n,{"parent-key":u.name,category:u,level:a.level+1,collapsable:!_.value.includes(u.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),oe={text:"center",class:"yun-text-light",p:"2"},ue=S({__name:"categories",setup(a){const{t:m}=B(),_=T(),s=U(),C=A(),n=x(()=>C.query.category||""),u=D(),k=x(()=>_.postList.filter(i=>i.categories&&n.value!=="Uncategorized"?typeof i.categories=="string"?i.categories===n.value:i.categories.join("/").startsWith(n.value)&&i.categories[0]===n.value.split("/")[0]:!i.categories&&n.value==="Uncategorized"?i.categories===void 0:!1)),Y=F(s);return W([H({"@type":"CollectionPage"})]),(y,i)=>{const h=O,e=J,l=ae,b=L("RouterView"),z=j,o=V;return t(),c(v,null,[y.$slots["sidebar-child"]?(t(),g(h,{key:0},{default:p(()=>[M(y.$slots,"sidebar-child")]),_:3})):(t(),g(h,{key:1})),d(b,null,{default:p(({Component:w})=>[(t(),g(Q(w),null,{"main-header":p(()=>[d(e,{title:r(Y)||r(m)("menu.categories"),icon:r(s).icon||"i-ri-folder-2-line",color:r(s).color,"page-title-class":r(s).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":p(()=>[f("div",oe,$(r(m)("counter.categories",Array.from(r(u).children).length)),1),d(l,{categories:r(u).children},null,8,["categories"]),d(b)]),"main-nav-before":p(()=>[n.value?(t(),g(o,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:p(()=>[d(e,{title:n.value==="Uncategorized"?r(m)("category.uncategorized"):n.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),d(z,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:k.value},null,8,["posts"])]),_:1})):R("v-if",!0)]),_:1}))]),_:1})],64)}}});export{ue as default};
