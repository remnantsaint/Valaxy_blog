---
layout: post
title: 栈与队列互相实现
date: 2025-08-20 09:52:42
updated: 2025-08-20
time_warning: true 
cover: 
top: 
tags: 
 - stl
categories: 
 - 算法基础
 - 栈与队列
# author: @Remsait
---
## 用栈实现队列
[题目链接](https://leetcode.cn/problems/implement-queue-using-stacks/)  
题意：  
仅用两个栈实现先入先出队列，队列应当支持一般操作（push , pop队列开头移除并返回元素 , peek 返回队列开头元素 , empty ）  
只能用标准的栈操作  
思路：  
模拟题，用两个栈，一个输入栈，一个输出栈  
输入栈先输入，一旦要输出，就把输入栈的元素全部放到输出栈，然后在输出栈里出栈  
出栈后继续，如果下次要出栈，就先判断输出栈是否为空，空的话就先把输入栈的放到输出栈，否则就直接输出  
如果进栈和出栈都为空的话，就说明模拟的队列空了  
代码如下：  
```c++
class MyQueue {
   public:
    stack<int> stIn;
    stack<int> stOut;
    MyQueue() {}

    void push(int x) { stIn.push(x); }

    int pop() {
        if (stOut.empty()) {
            while (!stIn.empty()) {
                stOut.push(stIn.top());
                stIn.pop();
            }
        }
        int result = stOut.top();
        stOut.pop();
        return result;
    }

    int peek() {
        int res = pop();
        stOut.push(res);
        return res;
    }

    bool empty() { return stIn.empty() && stOut.empty(); }
};

/**
 * Your MyQueue object will be instantiated and called as such:
 * MyQueue* obj = new MyQueue();
 * obj->push(x);
 * int param_2 = obj->pop();
 * int param_3 = obj->peek();
 * bool param_4 = obj->empty();
 */
```

## 用队列实现栈
[题目链接](https://leetcode.cn/problems/implement-stack-using-queues/description/)  
题意：  
仅用两个队列实现一个后入先出的栈，支持四种操作  
思路：  
（1）两个队列解法：一个用作主队列，一个用作备份队列，每次要出栈的时候，就把主队列前边元素都放到备份队列，然后出队列最后一个，再把备份队列的放回主队列  
（2）一个队列解法：只用一个队列，每次要出栈，就把队列元素除了最后一个都重新出队列入队列，这样就完事了  
代码如下：
```c++
class MyStack {
   public:
    queue<int> que;

    MyStack() {}

    void push(int x) { que.push(x); }

    int pop() {
        int size = que.size();
        size--;
        while (size--) {  // 将队列头部的元素（除了最后一个元素外） 重新添加到队列尾部
            que.push(que.front());
            que.pop();
        }
        int result = que.front();  // 此时弹出的元素顺序就是栈的顺序了
        que.pop();
        return result;
    }

    int top() {
        int result = pop();
        que.push(result);
        return result;
    }

    bool empty() { return que.empty(); }
};

/**
 * Your MyStack object will be instantiated and called as such:
 * MyStack* obj = new MyStack();
 * obj->push(x);
 * int param_2 = obj->pop();
 * int param_3 = obj->top();
 * bool param_4 = obj->empty();
 */
```














参考：[代码随想录](https://programmercarl.com/0232.%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97.html#%E7%AE%97%E6%B3%95%E5%85%AC%E5%BC%80%E8%AF%BE)  